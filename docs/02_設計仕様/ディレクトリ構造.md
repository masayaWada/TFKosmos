# 6. ディレクトリ構造

```bash
tfkosmos/
├── README.md
├── CLAUDE.md                 # AI開発ガイダンス
├── TODO.md                   # 開発タスク管理
├── Makefile                  # 開発用コマンド
├── dev.sh                    # 開発用起動スクリプト
├── package.json              # ルートパッケージ設定
├── .gitignore
│
├── .github/                  # GitHub設定
│   ├── ISSUE_TEMPLATE/       # イシューテンプレート
│   └── pull_request_template.md
│
├── assets/                   # 静的アセット
│
├── backend/                  # バックエンド（Rust）
│   ├── Cargo.toml            # Rust依存関係
│   │
│   ├── src/
│   │   ├── main.rs           # Axumアプリケーションエントリーポイント
│   │   ├── config.rs         # 環境設定（TFKOSMOS_* 環境変数）
│   │   │
│   │   ├── api/
│   │   │   ├── mod.rs
│   │   │   ├── error.rs      # 統一エラーハンドリング（ApiError）
│   │   │   └── routes/
│   │   │       ├── mod.rs
│   │   │       ├── connection.rs   # 接続管理API
│   │   │       ├── scan.rs         # スキャンAPI
│   │   │       ├── resources.rs    # リソース管理API
│   │   │       ├── generate.rs     # 生成API
│   │   │       └── templates.rs    # テンプレート管理API
│   │   │
│   │   ├── services/
│   │   │   ├── mod.rs
│   │   │   ├── connection_service.rs
│   │   │   ├── scan_service.rs
│   │   │   ├── resource_service.rs
│   │   │   ├── generation_service.rs
│   │   │   └── template_service.rs
│   │   │
│   │   ├── models/
│   │   │   ├── mod.rs
│   │   │   ├── request.rs          # リクエストモデル（ScanConfig, GenerationConfig）
│   │   │   └── response.rs         # レスポンスモデル
│   │   │
│   │   ├── domain/
│   │   │   └── mod.rs              # ドメインモデル（serde_json::Valueで柔軟に対応）
│   │   │
│   │   └── infra/
│   │       ├── mod.rs
│   │       │
│   │       ├── aws/
│   │       │   ├── mod.rs
│   │       │   ├── scanner.rs      # AwsIamScanner
│   │       │   └── client_factory.rs  # AWS SDKクライアント管理
│   │       │
│   │       ├── azure/
│   │       │   ├── mod.rs
│   │       │   ├── scanner.rs      # AzureIamScanner
│   │       │   └── client_factory.rs  # Azure認証管理
│   │       │
│   │       ├── templates/
│   │       │   ├── mod.rs
│   │       │   └── manager.rs      # TemplateManager
│   │       │
│   │       └── generators/
│   │           ├── mod.rs
│   │           ├── terraform.rs    # TerraformGenerator
│   │           └── naming.rs       # NamingGenerator（命名規則正規化）
│   │
│   ├── templates_default/
│   │   └── terraform/
│   │       ├── aws/
│   │       │   ├── iam_user.tf.j2
│   │       │   ├── iam_group.tf.j2
│   │       │   ├── iam_role.tf.j2
│   │       │   ├── iam_policy.tf.j2
│   │       │   ├── iam_user_policy_attachment.tf.j2
│   │       │   ├── iam_group_policy_attachment.tf.j2
│   │       │   ├── iam_role_policy_attachment.tf.j2
│   │       │   ├── iam_group_membership.tf.j2
│   │       │   ├── cleanup_access_key.tf.j2
│   │       │   ├── cleanup_login_profile.tf.j2
│   │       │   └── cleanup_mfa.tf.j2
│   │       │
│   │       └── azure/
│   │           ├── role_definition.tf.j2
│   │           └── role_assignment.tf.j2
│   │
│   └── templates_user/              # ユーザーカスタムテンプレート（.gitignore、実行時に生成）
│       └── terraform/
│           └── ...
│
├── frontend/                 # フロントエンド（React）
│   ├── package.json
│   ├── tsconfig.json
│   ├── vite.config.ts
│   ├── vitest.config.ts           # Vitestテスト設定
│   ├── eslint.config.js           # ESLint設定
│   │
│   ├── src/
│   │   ├── main.tsx
│   │   ├── App.tsx
│   │   ├── index.css
│   │   │
│   │   ├── context/                # 状態管理（Context API）
│   │   │   └── AppContext.tsx      # グローバル状態、カスタムフック
│   │   │
│   │   ├── styles/                 # 共通スタイル
│   │   │   └── formStyles.ts       # フォーム共通スタイル
│   │   │
│   │   ├── test/                   # テストユーティリティ
│   │   │   ├── setup.ts            # Vitestセットアップ（jest-dom等）
│   │   │   └── utils.tsx           # カスタムレンダラー
│   │   │
│   │   ├── components/
│   │   │   ├── common/
│   │   │   │   ├── Layout.tsx
│   │   │   │   ├── Navigation.tsx
│   │   │   │   ├── LoadingSpinner.tsx
│   │   │   │   ├── LoadingSpinner.test.tsx
│   │   │   │   ├── ErrorMessage.tsx
│   │   │   │   ├── ErrorMessage.test.tsx
│   │   │   │   ├── SuccessMessage.tsx
│   │   │   │   ├── SuccessMessage.test.tsx
│   │   │   │   └── NotificationContainer.tsx  # グローバル通知表示
│   │   │   │
│   │   │   ├── connection/
│   │   │   │   ├── ConnectionTabs.tsx
│   │   │   │   ├── AwsConnectionForm.tsx
│   │   │   │   └── AzureConnectionForm.tsx
│   │   │   │
│   │   │   ├── scan/
│   │   │   │   ├── ScanConfigForm.tsx
│   │   │   │   ├── ScanResultSummary.tsx
│   │   │   │   ├── AzureScopeSelector.tsx     # Azureスコープ選択
│   │   │   │   ├── ScanTargetSelector.tsx     # スキャン対象選択
│   │   │   │   ├── ScanTargetSelector.test.tsx
│   │   │   │   ├── ScanProgressBar.tsx        # プログレスバー
│   │   │   │   └── ScanProgressBar.test.tsx
│   │   │   │
│   │   │   ├── resources/
│   │   │   │   ├── ResourceTabs.tsx
│   │   │   │   ├── ResourceTable.tsx
│   │   │   │   ├── ResourceDetail.tsx
│   │   │   │   └── SelectionSummary.tsx
│   │   │   │
│   │   │   └── generate/
│   │   │       ├── GenerationConfigForm.tsx
│   │   │       └── CodePreview.tsx
│   │   │
│   │   ├── pages/
│   │   │   ├── ConnectionPage.tsx
│   │   │   ├── ScanPage.tsx
│   │   │   ├── ResourcesPage.tsx
│   │   │   ├── GeneratePage.tsx
│   │   │   └── TemplatesPage.tsx
│   │   │
│   │   └── api/
│   │       ├── client.ts           # APIクライアント（エラーハンドリング含む）
│   │       ├── connection.ts
│   │       ├── scan.ts
│   │       ├── resources.ts
│   │       ├── generate.ts
│   │       └── templates.ts
│   │
│   └── index.html
│
├── deployment/               # デスクトップアプリ（Tauri）
│   ├── package.json
│   └── src-tauri/
│       ├── Cargo.toml
│       ├── tauri.conf.json
│       ├── build.rs
│       ├── src/
│       │   └── main.rs
│       └── icons/
│           ├── 32x32.png
│           ├── 128x128.png
│           └── icon.ico
│
└── docs/                     # 開発ドキュメント
    ├── README.md             # ドキュメントインデックス
    ├── 01-システムアーキテクチャ.md
    ├── 02-データモデル.md
    ├── 03-API設計.md
    ├── 04-UI設計.md
    ├── 05-コンポーネント詳細仕様.md
    ├── 06-ディレクトリ構造.md   # このファイル
    ├── 07-実装詳細.md
    ├── 08-エラーハンドリング.md
    ├── 09-セキュリティ考慮事項.md
    ├── 10-開発・デプロイ.md
    ├── 11-テスト戦略.md
    ├── 12-今後の拡張.md
    └── 13-コミット戦略.md
```

## 主要ファイルの説明

### バックエンド

| ファイル | 説明 |
|---------|------|
| `config.rs` | 環境変数ベースの設定管理（`TFKOSMOS_ENV`, `TFKOSMOS_HOST`等） |
| `api/error.rs` | 統一エラーハンドリング（`ApiError` enum、HTTPステータスコードマッピング） |
| `generators/naming.rs` | リソース名の命名規則正規化（snake_case, kebab-case） |

### フロントエンド

| ディレクトリ/ファイル | 説明 |
|---------------------|------|
| `context/AppContext.tsx` | グローバル状態管理（スキャン状態、接続状態、通知） |
| `styles/formStyles.ts` | フォームコンポーネント共通スタイル |
| `test/setup.ts` | Vitestセットアップ（jest-dom、localStorageモック） |
| `test/utils.tsx` | カスタムレンダラー（BrowserRouter統合） |
| `components/common/NotificationContainer.tsx` | グローバル通知表示コンポーネント |

### テストファイル規約

- テストファイルは対象ファイルと同じディレクトリに配置
- ファイル名: `{ComponentName}.test.tsx`
- 例: `LoadingSpinner.tsx` → `LoadingSpinner.test.tsx`

---
