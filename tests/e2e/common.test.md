# 共通テスト E2E実行手順

このファイルは、アプリケーション起動・基本ナビゲーション・共通コンポーネントのE2Eテストを実行するためのガイドです。

## 前提条件

- [ ] バックエンドが起動している（http://localhost:8000）
- [ ] フロントエンドが起動している（http://localhost:5173）

## テスト実行方法

Claudeに以下のように指示してください：

```
このファイルのテストケースを順番に実行してください。
各テストケースの実行結果をチェックボックスで記録してください。
```

---

## 1.1 アプリケーション起動・基本ナビゲーション

### テストケース 1.1.1: アプリケーションにアクセス

**目的**: アプリケーションのトップページ（接続設定画面）が正常に表示されることを確認する

**手順**:
1. http://localhost:5173 にアクセス
2. ページスナップショットを取得
3. ページタイトルが"TFKosmos"であることを確認
4. 接続設定画面が表示されることを確認

**期待結果**:
- ページタイトル: "TFKosmos"
- 接続設定画面のヘッダー: "接続設定"
- AWS/Azureタブが表示される

**実行**:
```
1. mcp__playwright__browser_navigate({ url: "http://localhost:5173" })
2. mcp__playwright__browser_snapshot({})
3. ページタイトルとヘッダーを確認
```

**結果**: [x] 成功 / [ ] 失敗

**スクリーンショット**: `tests/screenshots/1.1.1_app_access.png`

---

### テストケース 1.1.2: ナビゲーションメニューの表示

**目的**: ナビゲーションメニューに接続設定、スキャン、テンプレートのリンクが表示されることを確認する

**手順**:
1. 前のテストの続きから
2. ページスナップショットでナビゲーションメニューを確認
3. 各リンクの存在を確認

**期待結果**:
- "接続設定" リンクが表示される
- "スキャン" リンクが表示される
- "テンプレート" リンクが表示される
- （注：リソース、生成ページはスキャン完了後に表示されるため、初期状態では非表示）

**実行**:
```
1. mcp__playwright__browser_snapshot({})
2. navigation 内の link 要素を確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 1.1.3: スキャンページへの遷移

**目的**: "スキャン" リンクをクリックして、スキャンページに遷移できることを確認する

**手順**:
1. 前のテストの続きから
2. "スキャン" リンクをクリック
3. ページスナップショットを取得
4. URLとページ内容を確認

**期待結果**:
- URL: http://localhost:5173/scan
- ページヘッダー: "スキャン設定"
- プロバイダー選択（AWS/Azure）が表示される

**実行**:
```
1. mcp__playwright__browser_click({ element: "スキャンリンク", ref: "..." })
2. mcp__playwright__browser_snapshot({})
3. URLとヘッダーを確認
```

**結果**: [ ] 成功 / [ ] 失敗

**スクリーンショット**: `tests/screenshots/1.1.3_scan_page.png`

---

### テストケース 1.1.4: テンプレートページへの遷移

**目的**: "テンプレート" リンクをクリックして、テンプレート管理画面に遷移できることを確認する

**手順**:
1. 前のテストの続きから
2. "テンプレート" リンクをクリック
3. ページスナップショットを取得
4. URLとページ内容を確認

**期待結果**:
- URL: http://localhost:5173/templates
- ページヘッダー: "テンプレート管理"（またはそれに類する表示）
- テンプレート一覧が表示される

**実行**:
```
1. mcp__playwright__browser_click({ element: "テンプレートリンク", ref: "..." })
2. mcp__playwright__browser_snapshot({})
3. URLとヘッダーを確認
```

**結果**: [ ] 成功 / [ ] 失敗

**スクリーンショット**: `tests/screenshots/1.1.4_templates_page.png`

---

### テストケース 1.1.5: 接続設定ページに戻る

**目的**: "接続設定" リンクをクリックして、接続設定画面に戻れることを確認する

**手順**:
1. 前のテストの続きから
2. "接続設定" リンクをクリック
3. ページスナップショットを取得
4. URLとページ内容を確認

**期待結果**:
- URL: http://localhost:5173/ または http://localhost:5173/connection
- ページヘッダー: "接続設定"
- AWS/Azureタブが表示される

**実行**:
```
1. mcp__playwright__browser_click({ element: "接続設定リンク", ref: "..." })
2. mcp__playwright__browser_snapshot({})
3. URLとヘッダーを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

## 1.2 共通コンポーネント

### テストケース 1.2.1: LoadingSpinnerの表示（スキャン実行時）

**目的**: ローディング中にスピナーが表示されることを確認する

**注**: このテストは実際のスキャン実行が必要なため、Phase 3（スキャン設定画面テスト）と統合して実施することを推奨

**手順**:
1. スキャン設定画面でスキャンを実行
2. ローディング状態を確認

**期待結果**:
- ローディングスピナーまたはプログレスバーが表示される

**実行**: Phase 3で実施

**結果**: [ ] 成功 / [ ] 失敗 / [x] Phase 3で実施

---

### テストケース 1.2.2: ErrorMessageの表示（接続テスト失敗時）

**目的**: エラーが発生した際にエラーメッセージが表示され、閉じるボタンで非表示にできることを確認する

**注**: このテストは実際のエラーが必要なため、接続設定画面テスト（2.2.7, 2.3.8）と統合して実施

**手順**:
1. 接続設定画面で不正な認証情報でテスト実行
2. エラーメッセージを確認
3. 閉じるボタンをクリック

**期待結果**:
- エラーメッセージが表示される
- 閉じるボタンで非表示になる

**実行**: Phase 2（2.2.7, 2.3.8）で実施

**結果**: [ ] 成功 / [ ] 失敗 / [x] Phase 2で実施

---

### テストケース 1.2.3: SuccessMessageの表示（接続テスト成功時）

**目的**: 成功メッセージが表示され、閉じるボタンで非表示にできることを確認する

**注**: このテストは実際の成功レスポンスが必要なため、接続設定画面テスト（2.2.6, 2.3.7）と統合して実施

**手順**:
1. 接続設定画面で正しい認証情報でテスト実行
2. 成功メッセージを確認
3. 閉じるボタンをクリック

**期待結果**:
- 成功メッセージが表示される
- 閉じるボタンで非表示になる

**実行**: Phase 2（2.2.6, 2.3.7）で実施

**結果**: [ ] 成功 / [ ] 失敗 / [x] Phase 2で実施

---

## テスト結果サマリー

| テストケース | 結果 | 備考 |
|------------|------|------|
| 1.1.1 アプリケーションにアクセス | [x] | |
| 1.1.2 ナビゲーションメニューの表示 | [x] | |
| 1.1.3 スキャンページへの遷移 | [x] | |
| 1.1.4 テンプレートページへの遷移 | [x] | |
| 1.1.5 接続設定ページに戻る | [x] | |
| 1.2.1 LoadingSpinner | [x] Phase 3で実施 | |
| 1.2.2 ErrorMessage | [x] Phase 2で実施 | |
| 1.2.3 SuccessMessage | [x] Phase 2で実施 | |

**実施可能テスト数**: 5/8
**Phase 2/3統合テスト**: 3/8
