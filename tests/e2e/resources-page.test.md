# ResourcesPage E2Eテスト実行手順

このファイルは、リソース一覧画面（ResourcesPage）のE2Eテストを実行するためのガイドです。

## 前提条件

- [ ] バックエンドが起動している（http://localhost:8000）
- [ ] フロントエンドが起動している（http://localhost:5173）
- [ ] スキャンが完了しており、有効なスキャンIDが存在する

## テスト実行方法

Claudeに以下のように指示してください：

```
このファイルのテストケースを順番に実行してください。
各テストケースの実行結果をチェックボックスで記録してください。
```

---

## 4.1 画面表示テスト

### テストケース 4.1.1: スキャンID表示

**目的**: URLパラメータのスキャンIDが画面に表示されることを確認する

**手順**:
1. http://localhost:5173/resources/{scan_id} にアクセス（{scan_id}は実際のスキャンID）
2. ページスナップショットを取得
3. スキャンIDが表示されることを確認

**期待結果**:
- ページ上部にスキャンIDが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_navigate({ url: "http://localhost:5173/resources/test-scan-001" })
2. mcp__playwright__browser_snapshot({})
3. "test-scan-001" が表示されていることを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.1.2: スキャン結果サマリーの表示

**目的**: 各リソースタイプの件数が表示されることを確認する

**手順**:
1. リソース一覧画面にアクセス
2. ページスナップショットを取得
3. サマリー情報（Users: X件、Groups: Y件 等）が表示されることを確認

**期待結果**:
- 各リソースタイプの件数が表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_snapshot({})
2. "Users:", "Groups:", "Roles:" 等のテキストが存在することを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.1.3: フィルタボタンの表示

**目的**: フィルタ表示/非表示ボタンが表示されることを確認する

**手順**:
1. リソース一覧画面にアクセス
2. ページスナップショットを取得
3. フィルタボタンが表示されることを確認

**期待結果**:
- フィルタボタン（または「フィルタを表示」等のテキスト）が表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_snapshot({})
2. "フィルタ" ボタンの存在を確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

## 4.2 リソースタブ（AWS）テスト

**注意**: このセクションは、AWSスキャン結果がある場合のみ実行できます。

### テストケース 4.2.1: Usersタブの表示（初期アクティブ）

**目的**: 初期表示時にUsersタブがアクティブで、ユーザー一覧が表示されることを確認する

**手順**:
1. AWSスキャン結果のリソース一覧画面にアクセス
2. ページスナップショットを取得
3. Usersタブがアクティブであることを確認
4. ユーザー一覧が表示されることを確認

**期待結果**:
- Usersタブがハイライト表示される
- ユーザー一覧テーブルが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_navigate({ url: "http://localhost:5173/resources/{aws-scan-id}" })
2. mcp__playwright__browser_snapshot({})
3. "Users" タブがアクティブであることを確認
4. user_name カラムを持つテーブルが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗 / [ ] スキップ（AWS結果なし）

---

### テストケース 4.2.2: Groupsタブへの切り替え

**目的**: Groupsタブをクリックすると、グループ一覧が表示されることを確認する

**手順**:
1. AWSリソース一覧画面で
2. Groupsタブをクリック
3. ページスナップショットを取得
4. グループ一覧が表示されることを確認

**期待結果**:
- Groupsタブがアクティブになる
- グループ一覧テーブルが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "Groups tab", ref: "..." })
2. mcp__playwright__browser_snapshot({})
3. group_name カラムを持つテーブルが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗 / [ ] スキップ（AWS結果なし）

---

### テストケース 4.2.3: Rolesタブへの切り替え

**目的**: Rolesタブをクリックすると、ロール一覧が表示されることを確認する

**手順**:
1. AWSリソース一覧画面で
2. Rolesタブをクリック
3. ページスナップショットを取得
4. ロール一覧が表示されることを確認

**期待結果**:
- Rolesタブがアクティブになる
- ロール一覧テーブルが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "Roles tab", ref: "..." })
2. mcp__playwright__browser_snapshot({})
3. role_name カラムを持つテーブルが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗 / [ ] スキップ（AWS結果なし）

---

### テストケース 4.2.4: Policiesタブへの切り替え

**目的**: Policiesタブをクリックすると、ポリシー一覧が表示されることを確認する

**手順**:
1. AWSリソース一覧画面で
2. Policiesタブをクリック
3. ページスナップショットを取得
4. ポリシー一覧が表示されることを確認

**期待結果**:
- Policiesタブがアクティブになる
- ポリシー一覧テーブルが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "Policies tab", ref: "..." })
2. mcp__playwright__browser_snapshot({})
3. policy_name または arn カラムを持つテーブルが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗 / [ ] スキップ（AWS結果なし）

---

### テストケース 4.2.5: Attachmentsタブへの切り替え

**目的**: Attachmentsタブをクリックすると、アタッチメント一覧が表示されることを確認する

**手順**:
1. AWSリソース一覧画面で
2. Attachmentsタブをクリック
3. ページスナップショットを取得
4. アタッチメント一覧が表示されることを確認

**期待結果**:
- Attachmentsタブがアクティブになる
- アタッチメント一覧テーブルが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "Attachments tab", ref: "..." })
2. mcp__playwright__browser_snapshot({})
3. entity_type, entity_name, policy_arn カラムを持つテーブルが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗 / [ ] スキップ（AWS結果なし）

---

### テストケース 4.2.6: Cleanupタブへの切り替え

**目的**: Cleanupタブをクリックすると、クリーンアップ対象一覧が表示されることを確認する

**手順**:
1. AWSリソース一覧画面で
2. Cleanupタブをクリック
3. ページスナップショットを取得
4. クリーンアップ対象一覧が表示されることを確認

**期待結果**:
- Cleanupタブがアクティブになる
- クリーンアップ対象一覧が表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "Cleanup tab", ref: "..." })
2. mcp__playwright__browser_snapshot({})
3. クリーンアップ対象を示すテーブルまたはメッセージが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗 / [ ] スキップ（AWS結果なし）

---

### テストケース 4.2.7: Dependenciesタブへの切り替え

**目的**: Dependenciesタブをクリックすると、依存関係グラフが表示されることを確認する

**手順**:
1. AWSリソース一覧画面で
2. Dependenciesタブをクリック
3. ページスナップショットを取得
4. 依存関係グラフが表示されることを確認

**期待結果**:
- Dependenciesタブがアクティブになる
- 依存関係グラフが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "Dependencies tab", ref: "..." })
2. mcp__playwright__browser_wait_for({ time: 1 })
3. mcp__playwright__browser_snapshot({})
4. グラフまたは "依存関係を読み込んでいます" メッセージが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗 / [ ] スキップ（AWS結果なし）

---

## 4.3 リソースタブ（Azure）テスト

**注意**: このセクションは、Azureスキャン結果がある場合のみ実行できます。

### テストケース 4.3.1: Role Assignmentsタブの表示

**目的**: Azureスキャン結果では、Role Assignmentsタブが初期表示され、ロール割り当て一覧が表示されることを確認する

**手順**:
1. Azureスキャン結果のリソース一覧画面にアクセス
2. ページスナップショットを取得
3. Role Assignmentsタブがアクティブであることを確認
4. ロール割り当て一覧が表示されることを確認

**期待結果**:
- Role Assignmentsタブがアクティブになる
- ロール割り当て一覧テーブルが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_navigate({ url: "http://localhost:5173/resources/{azure-scan-id}" })
2. mcp__playwright__browser_snapshot({})
3. "Role Assignments" タブがアクティブであることを確認
4. role_assignment_id カラムを持つテーブルが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗 / [ ] スキップ（Azure結果なし）

---

### テストケース 4.3.2: Role Definitionsタブへの切り替え

**目的**: Role Definitionsタブをクリックすると、ロール定義一覧が表示されることを確認する

**手順**:
1. Azureリソース一覧画面で
2. Role Definitionsタブをクリック
3. ページスナップショットを取得
4. ロール定義一覧が表示されることを確認

**期待結果**:
- Role Definitionsタブがアクティブになる
- ロール定義一覧テーブルが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "Role Definitions tab", ref: "..." })
2. mcp__playwright__browser_snapshot({})
3. role_name または role_definition_id カラムを持つテーブルが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗 / [ ] スキップ（Azure結果なし）

---

### テストケース 4.3.3: Dependenciesタブへの切り替え

**目的**: Dependenciesタブをクリックすると、依存関係グラフが表示されることを確認する

**手順**:
1. Azureリソース一覧画面で
2. Dependenciesタブをクリック
3. ページスナップショットを取得
4. 依存関係グラフが表示されることを確認

**期待結果**:
- Dependenciesタブがアクティブになる
- 依存関係グラフが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "Dependencies tab", ref: "..." })
2. mcp__playwright__browser_wait_for({ time: 1 })
3. mcp__playwright__browser_snapshot({})
4. グラフまたは "依存関係を読み込んでいます" メッセージが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗 / [ ] スキップ（Azure結果なし）

---

## 4.4 リソーステーブルテスト

### テストケース 4.4.1: カラムヘッダーの表示

**目的**: テーブルに適切なカラムヘッダーが表示されることを確認する

**手順**:
1. リソース一覧画面でUsersタブを選択
2. ページスナップショットを取得
3. カラムヘッダー（名前、ARN、Path等）が表示されることを確認

**期待結果**:
- カラムヘッダーが表示される（例: user_name, arn, path）

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "Users tab", ref: "..." })
2. mcp__playwright__browser_snapshot({})
3. テーブルヘッダーにカラム名が表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.4.2: リソースデータの表示

**目的**: 各リソースの情報が行として表示されることを確認する

**手順**:
1. リソース一覧画面でUsersタブを選択
2. ページスナップショットを取得
3. リソースデータが行として表示されることを確認

**期待結果**:
- テーブルにリソースデータが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_snapshot({})
2. テーブル内にデータ行が存在することを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.4.3: チェックボックスによる選択

**目的**: リソースを選択できることを確認する

**手順**:
1. リソース一覧画面でUsersタブを選択
2. 最初の行のチェックボックスをクリック
3. ページスナップショットを取得
4. チェックボックスが選択されたことを確認

**期待結果**:
- チェックボックスがチェック済み状態になる

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "first resource checkbox", ref: "..." })
2. mcp__playwright__browser_snapshot({})
3. チェックボックスが checked 状態になっていることを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.4.4: チェックボックスの複数選択

**目的**: 複数のリソースを選択できることを確認する

**手順**:
1. リソース一覧画面でUsersタブを選択
2. 最初の3つの行のチェックボックスをクリック
3. ページスナップショットを取得
4. 3つのチェックボックスが選択されたことを確認

**期待結果**:
- 3つのチェックボックスがチェック済み状態になる

**実行**:
```
# 実装コマンド例
1. 最初の3つのチェックボックスをクリック
2. mcp__playwright__browser_snapshot({})
3. 3つのチェックボックスが checked 状態になっていることを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.4.5: 全選択チェックボックス

**目的**: 全選択チェックボックスをクリックすると、表示中の全リソースが選択されることを確認する

**手順**:
1. リソース一覧画面でUsersタブを選択
2. テーブルヘッダーの全選択チェックボックスをクリック
3. ページスナップショットを取得
4. すべてのリソースが選択されたことを確認

**期待結果**:
- 表示中のすべてのリソースがチェック済み状態になる

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "select all checkbox", ref: "..." })
2. mcp__playwright__browser_snapshot({})
3. すべての行のチェックボックスが checked 状態になっていることを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.4.6: 全選択の解除

**目的**: 全選択チェックボックスを再度クリックすると、全リソースの選択が解除されることを確認する

**手順**:
1. 前のテストの続きから（全選択状態）
2. テーブルヘッダーの全選択チェックボックスをクリック
3. ページスナップショットを取得
4. すべてのリソースの選択が解除されたことを確認

**期待結果**:
- すべてのリソースがチェックなし状態になる

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "select all checkbox", ref: "..." })
2. mcp__playwright__browser_snapshot({})
3. すべての行のチェックボックスが unchecked 状態になっていることを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.4.7: 行クリックで詳細表示

**目的**: リソース行をクリックすると、詳細がモーダル等で表示されることを確認する

**注意**: この機能が未実装の場合、スキップしてください。

**手順**:
1. リソース一覧画面でUsersタブを選択
2. 最初のリソース行をクリック
3. ページスナップショットを取得
4. 詳細表示モーダル等が表示されることを確認

**期待結果**:
- リソース詳細が表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "first resource row", ref: "..." })
2. mcp__playwright__browser_wait_for({ time: 0.5 })
3. mcp__playwright__browser_snapshot({})
4. 詳細モーダルまたはパネルが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗 / [ ] スキップ（機能未実装）

---

## 4.5 フィルタ機能テスト

### テストケース 4.5.1: フィルタボタンでパネル表示

**目的**: フィルタボタンをクリックすると、フィルタパネルが表示されることを確認する

**手順**:
1. リソース一覧画面でUsersタブを選択
2. フィルタボタンをクリック
3. ページスナップショットを取得
4. フィルタパネルが表示されることを確認

**期待結果**:
- フィルタパネルが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "filter button", ref: "..." })
2. mcp__playwright__browser_wait_for({ time: 0.5 })
3. mcp__playwright__browser_snapshot({})
4. フィルタパネルが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.5.2: シンプル検索モードの選択

**目的**: シンプル検索モードを選択すると、シンプル検索フォームが表示されることを確認する

**手順**:
1. フィルタパネルが表示されている状態で
2. シンプル検索ラジオボタンをクリック
3. ページスナップショットを取得
4. シンプル検索フォームが表示されることを確認

**期待結果**:
- シンプル検索の入力フィールドが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "simple search radio", ref: "..." })
2. mcp__playwright__browser_snapshot({})
3. 検索テキスト入力フィールドが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.5.3: シンプル検索の実行

**目的**: シンプル検索で検索テキストを入力すると、一致するリソースが表示されることを確認する

**手順**:
1. シンプル検索モードで
2. 検索テキストを入力（例: "admin"）
3. 検索ボタンをクリック
4. ページスナップショットを取得
5. 検索結果が表示されることを確認

**期待結果**:
- 検索テキストに一致するリソースが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_type({ element: "search input", ref: "...", text: "admin" })
2. mcp__playwright__browser_click({ element: "search button", ref: "..." })
3. mcp__playwright__browser_wait_for({ time: 1 })
4. mcp__playwright__browser_snapshot({})
5. 検索結果テーブルに "admin" を含むリソースが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.5.4: 高度なクエリモードの選択

**目的**: 高度なクエリモードを選択すると、クエリ入力フォームが表示されることを確認する

**手順**:
1. フィルタパネルが表示されている状態で
2. 高度なクエリラジオボタンをクリック
3. ページスナップショットを取得
4. クエリ入力フォームが表示されることを確認

**期待結果**:
- クエリ入力フィールドが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "advanced query radio", ref: "..." })
2. mcp__playwright__browser_snapshot({})
3. クエリ入力フィールドが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.5.5: クエリヘルプの表示

**目的**: ?ボタンをクリックすると、クエリ構文ヘルプが表示されることを確認する

**手順**:
1. 高度なクエリモードで
2. ?ボタンをクリック
3. ページスナップショットを取得
4. クエリ構文ヘルプが表示されることを確認

**期待結果**:
- クエリ構文のヘルプテキストが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "help button", ref: "..." })
2. mcp__playwright__browser_wait_for({ time: 0.5 })
3. mcp__playwright__browser_snapshot({})
4. "field == \"value\"" 等のヘルプテキストが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.5.6: 高度なクエリの実行（成功）

**目的**: 有効なクエリを実行すると、クエリ結果が表示されることを確認する

**手順**:
1. 高度なクエリモードで
2. クエリを入力（例: `user_name == "admin"`）
3. 検索ボタンをクリック
4. ページスナップショットを取得
5. クエリ結果が表示されることを確認

**期待結果**:
- クエリに一致するリソースが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_type({ element: "query input", ref: "...", text: 'user_name == "admin"' })
2. mcp__playwright__browser_click({ element: "search button", ref: "..." })
3. mcp__playwright__browser_wait_for({ time: 1 })
4. mcp__playwright__browser_snapshot({})
5. クエリ結果が表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.5.7: 高度なクエリの実行（構文エラー）

**目的**: 無効なクエリを実行すると、エラーメッセージが表示されることを確認する

**手順**:
1. 高度なクエリモードで
2. 無効なクエリを入力（例: `user_name =`）
3. 検索ボタンをクリック
4. ページスナップショットを取得
5. エラーメッセージが表示されることを確認

**期待結果**:
- 構文エラーメッセージが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_type({ element: "query input", ref: "...", text: "user_name =" })
2. mcp__playwright__browser_click({ element: "search button", ref: "..." })
3. mcp__playwright__browser_wait_for({ text: "エラー" })
4. mcp__playwright__browser_snapshot({})
5. エラーメッセージが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.5.8: クリアボタンでフィルタ解除

**目的**: クリアボタンをクリックすると、フィルタが解除され全リソースが表示されることを確認する

**手順**:
1. フィルタが適用されている状態で
2. クリアボタンをクリック
3. ページスナップショットを取得
4. フィルタが解除され、全リソースが表示されることを確認

**期待結果**:
- フィルタが解除され、全リソースが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "clear button", ref: "..." })
2. mcp__playwright__browser_wait_for({ time: 1 })
3. mcp__playwright__browser_snapshot({})
4. 全リソースが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.5.9: フィルタボタンでパネル非表示

**目的**: フィルタボタンを再度クリックすると、フィルタパネルが非表示になることを確認する

**手順**:
1. フィルタパネルが表示されている状態で
2. フィルタボタンをクリック
3. ページスナップショットを取得
4. フィルタパネルが非表示になることを確認

**期待結果**:
- フィルタパネルが非表示になる

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "filter button", ref: "..." })
2. mcp__playwright__browser_wait_for({ time: 0.5 })
3. mcp__playwright__browser_snapshot({})
4. フィルタパネルが非表示になっていることを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

## 4.6 ページネーションテスト

**注意**: ページネーションは、リソース数が50件を超える場合に表示されます。

### テストケース 4.6.1: ページ情報の表示

**目的**: ページ情報（「X / Y ページ (全 Z 件)」）が表示されることを確認する

**手順**:
1. リソース一覧画面でUsersタブを選択
2. ページスナップショットを取得
3. ページ情報が表示されることを確認

**期待結果**:
- ページ情報が表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_snapshot({})
2. "ページ" または "Page" テキストが存在することを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.6.2: 次へボタンのクリック

**目的**: 次へボタンをクリックすると、次のページに遷移することを確認する

**注意**: このテストは、リソース数が50件を超える場合のみ実行できます。

**手順**:
1. リソース一覧画面でUsersタブを選択
2. 次へボタンをクリック
3. ページスナップショットを取得
4. 2ページ目が表示されることを確認

**期待結果**:
- 2ページ目に遷移する

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "next page button", ref: "..." })
2. mcp__playwright__browser_wait_for({ time: 1 })
3. mcp__playwright__browser_snapshot({})
4. "2 / Y ページ" が表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗 / [ ] スキップ（ページ数不足）

---

### テストケース 4.6.3: 前へボタンのクリック

**目的**: 前へボタンをクリックすると、前のページに遷移することを確認する

**注意**: このテストは、2ページ目以降にいる場合のみ実行できます。

**手順**:
1. 2ページ目にいる状態で
2. 前へボタンをクリック
3. ページスナップショットを取得
4. 1ページ目が表示されることを確認

**期待結果**:
- 1ページ目に遷移する

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "previous page button", ref: "..." })
2. mcp__playwright__browser_wait_for({ time: 1 })
3. mcp__playwright__browser_snapshot({})
4. "1 / Y ページ" が表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗 / [ ] スキップ（ページ数不足）

---

### テストケース 4.6.4: 最初のページで前へボタン無効

**目的**: 最初のページでは前へボタンが無効化されることを確認する

**手順**:
1. 1ページ目にいる状態で
2. ページスナップショットを取得
3. 前へボタンが無効化されていることを確認

**期待結果**:
- 前へボタンが無効化される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_snapshot({})
2. 前へボタンの disabled 属性を確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.6.5: 最後のページで次へボタン無効

**目的**: 最後のページでは次へボタンが無効化されることを確認する

**注意**: このテストは、複数ページが存在する場合のみ実行できます。

**手順**:
1. 最後のページに移動
2. ページスナップショットを取得
3. 次へボタンが無効化されていることを確認

**期待結果**:
- 次へボタンが無効化される

**実行**:
```
# 実装コマンド例
1. 次へボタンを繰り返しクリックして最後のページに移動
2. mcp__playwright__browser_snapshot({})
3. 次へボタンの disabled 属性を確認
```

**結果**: [ ] 成功 / [ ] 失敗 / [ ] スキップ（ページ数不足）

---

## 4.7 選択サマリーテスト

### テストケース 4.7.1: 選択件数の表示

**目的**: リソースを選択すると、選択件数が表示されることを確認する

**手順**:
1. リソース一覧画面でUsersタブを選択
2. 3つのリソースを選択
3. ページスナップショットを取得
4. 選択件数が表示されることを確認

**期待結果**:
- 「3件選択」等の表示がされる

**実行**:
```
# 実装コマンド例
1. 3つのチェックボックスをクリック
2. mcp__playwright__browser_snapshot({})
3. "3件" または "3 selected" が表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.7.2: 生成ページへボタンの表示

**目的**: リソースを選択すると、生成ページへ遷移するボタンが表示されることを確認する

**手順**:
1. リソースを選択した状態で
2. ページスナップショットを取得
3. 生成ページへ遷移するボタンが表示されることを確認

**期待結果**:
- 「生成ページへ」等のボタンが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_snapshot({})
2. "生成" または "Generate" ボタンが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗

---

### テストケース 4.7.3: 生成ページへの遷移

**目的**: 生成ページへボタンをクリックすると、生成画面に遷移することを確認する

**手順**:
1. リソースを選択した状態で
2. 生成ページへボタンをクリック
3. URLを確認
4. ページスナップショットを取得

**期待結果**:
- URLが `/generate/{scan_id}` に変わる
- 生成画面が表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "generate button", ref: "..." })
2. mcp__playwright__browser_wait_for({ time: 1 })
3. URLが /generate/ を含むことを確認
4. mcp__playwright__browser_snapshot({})
```

**結果**: [ ] 成功 / [ ] 失敗

---

## 4.8 依存関係グラフテスト

**注意**: 依存関係グラフ機能が実装されている場合のみ実行できます。

### テストケース 4.8.1: グラフの表示

**目的**: Dependenciesタブでノードとエッジが表示されることを確認する

**手順**:
1. Dependenciesタブをクリック
2. グラフの読み込みを待つ
3. ページスナップショットを取得
4. ノードとエッジが表示されることを確認

**期待結果**:
- グラフビューアが表示され、ノードとエッジが描画される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_click({ element: "Dependencies tab", ref: "..." })
2. mcp__playwright__browser_wait_for({ time: 2 })
3. mcp__playwright__browser_snapshot({})
4. グラフが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗 / [ ] スキップ（機能未実装）

---

### テストケース 4.8.2: ノードの色分け

**目的**: リソースタイプごとにノードの色が異なることを確認する

**手順**:
1. Dependenciesタブでグラフが表示されている状態で
2. ページスナップショットを取得
3. 異なるリソースタイプのノードが異なる色で表示されることを確認

**期待結果**:
- ノードがリソースタイプごとに色分けされている

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_snapshot({})
2. 複数の色のノードが存在することを確認
```

**結果**: [ ] 成功 / [ ] 失敗 / [ ] スキップ（機能未実装）

---

### テストケース 4.8.3: 凡例の表示

**目的**: 色とリソースタイプの対応を示す凡例が表示されることを確認する

**手順**:
1. Dependenciesタブでグラフが表示されている状態で
2. ページスナップショットを取得
3. 凡例が表示されることを確認

**期待結果**:
- 凡例が表示される（例: ■ user, ■ group, ■ policy）

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_snapshot({})
2. 凡例コンポーネントが存在することを確認
```

**結果**: [ ] 成功 / [ ] 失敗 / [ ] スキップ（機能未実装）

---

### テストケース 4.8.4: ズーム・パン操作

**目的**: グラフをズーム・パンできることを確認する

**手順**:
1. Dependenciesタブでグラフが表示されている状態で
2. ズームコントロールをクリック
3. ページスナップショットを取得
4. グラフの表示が変化することを確認

**期待結果**:
- ズーム・パン操作が可能

**実行**:
```
# 実装コマンド例
1. ズームインボタンをクリック
2. mcp__playwright__browser_wait_for({ time: 0.5 })
3. mcp__playwright__browser_snapshot({})
4. グラフの表示が変化していることを確認
```

**結果**: [ ] 成功 / [ ] 失敗 / [ ] スキップ（機能未実装）

---

### テストケース 4.8.5: ミニマップの表示

**目的**: グラフ全体を俯瞰できるミニマップが表示されることを確認する

**手順**:
1. Dependenciesタブでグラフが表示されている状態で
2. ページスナップショットを取得
3. ミニマップが表示されることを確認

**期待結果**:
- ミニマップコンポーネントが表示される

**実行**:
```
# 実装コマンド例
1. mcp__playwright__browser_snapshot({})
2. ミニマップが表示されることを確認
```

**結果**: [ ] 成功 / [ ] 失敗 / [ ] スキップ（機能未実装）

---

## テスト結果サマリー

### 4.1 画面表示テスト
- [ ] 4.1.1 スキャンID表示
- [ ] 4.1.2 スキャン結果サマリーの表示
- [ ] 4.1.3 フィルタボタンの表示

### 4.2 リソースタブ（AWS）テスト
- [ ] 4.2.1 Usersタブの表示（初期アクティブ）
- [ ] 4.2.2 Groupsタブへの切り替え
- [ ] 4.2.3 Rolesタブへの切り替え
- [ ] 4.2.4 Policiesタブへの切り替え
- [ ] 4.2.5 Attachmentsタブへの切り替え
- [ ] 4.2.6 Cleanupタブへの切り替え
- [ ] 4.2.7 Dependenciesタブへの切り替え

### 4.3 リソースタブ（Azure）テスト
- [ ] 4.3.1 Role Assignmentsタブの表示
- [ ] 4.3.2 Role Definitionsタブへの切り替え
- [ ] 4.3.3 Dependenciesタブへの切り替え

### 4.4 リソーステーブルテスト
- [ ] 4.4.1 カラムヘッダーの表示
- [ ] 4.4.2 リソースデータの表示
- [ ] 4.4.3 チェックボックスによる選択
- [ ] 4.4.4 チェックボックスの複数選択
- [ ] 4.4.5 全選択チェックボックス
- [ ] 4.4.6 全選択の解除
- [ ] 4.4.7 行クリックで詳細表示

### 4.5 フィルタ機能テスト
- [ ] 4.5.1 フィルタボタンでパネル表示
- [ ] 4.5.2 シンプル検索モードの選択
- [ ] 4.5.3 シンプル検索の実行
- [ ] 4.5.4 高度なクエリモードの選択
- [ ] 4.5.5 クエリヘルプの表示
- [ ] 4.5.6 高度なクエリの実行（成功）
- [ ] 4.5.7 高度なクエリの実行（構文エラー）
- [ ] 4.5.8 クリアボタンでフィルタ解除
- [ ] 4.5.9 フィルタボタンでパネル非表示

### 4.6 ページネーションテスト
- [ ] 4.6.1 ページ情報の表示
- [ ] 4.6.2 次へボタンのクリック
- [ ] 4.6.3 前へボタンのクリック
- [ ] 4.6.4 最初のページで前へボタン無効
- [ ] 4.6.5 最後のページで次へボタン無効

### 4.7 選択サマリーテスト
- [ ] 4.7.1 選択件数の表示
- [ ] 4.7.2 生成ページへボタンの表示
- [ ] 4.7.3 生成ページへの遷移

### 4.8 依存関係グラフテスト
- [ ] 4.8.1 グラフの表示
- [ ] 4.8.2 ノードの色分け
- [ ] 4.8.3 凡例の表示
- [ ] 4.8.4 ズーム・パン操作
- [ ] 4.8.5 ミニマップの表示

---

## 実施記録

- 実施日:
- 実施者:
- 環境:
  - バックエンド: http://localhost:8000
  - フロントエンド: http://localhost:5173
- 全体結果: 成功 / 失敗 / 一部失敗

### 備考

（テスト実施時の気づき、問題点、改善提案などを記載）
